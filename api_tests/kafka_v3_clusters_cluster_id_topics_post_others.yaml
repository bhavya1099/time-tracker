# ********RoostGPT********

# Test generated by RoostGPT for test artilleryTest using AI Type  and AI Model 
# 
# Test generated for /kafka/v3/clusters/{cluster_id}/topics_post for http method type POST in artillery framework
# RoostTestHash=783e9d2ab5
# 
# 

# ********RoostGPT********
config:
  target: "{{ $processEnvironment.API_HOST }}"
  plugins:
    expect:
      - plugin: expect
scenarios:
  - name: Non-Success API Responses
    flow:
      - think: 1000
      - post:
          url: "/kafka/v3/clusters/{cluster_id}/topics"
          headers:
            Authorization: "Bearer {{$processEnvironment.AUTH_TOKEN}}"
          payload:
            topic_name: "invalid_topic"
            partitions_count: 0
            replication_factor: 0
            configs:
              - name: "invalid_config"
                value: "invalid_value"
            validate_only: true
          capture:
            - json: "$.error_code"
              as: "error_code"
          expect:
            - statusCode: 400
            - notHasProperty: "message"
            - hasProperty: "error_code"
            - equals:
                - "@error_code"
                - 400
      - think: 1000
      - post:
          url: "/kafka/v3/clusters/{cluster_id}/topics"
          headers:
            Authorization: "Bearer {{$processEnvironment.AUTH_TOKEN}}"
          payload:
            topic_name: "topic-X"
            partitions_count: 64
            replication_factor: 3
            configs:
              - name: "cleanup.policy"
                value: "compact"
            - name: "compression.type"
                value: "gzip"
          expect:
            - statusCode: 201
            - hasProperty: "topic_name"
            - hasProperty: "partitions_count"
            - hasProperty: "replication_factor"
            - hasProperty: "configs"
            - hasProperty: "validate_only"
      - think: 1000
      - post:
          url: "/kafka/v3/clusters/{cluster_id}/topics"
          headers:
            Authorization: "Bearer {{$processEnvironment.AUTH_TOKEN}}"
          payload:
            topic_name: "topic-X"
            partitions_count: 64
            replication_factor: 3
            validate_only: true
          expect:
            - statusCode: 200
            - hasProperty: "topic_name"
            - hasProperty: "partitions_count"
            - hasProperty: "replication_factor"
            - hasProperty: "validate_only"
      - think: 1000
      - post:
          url: "/kafka/v3/clusters/{cluster_id}/topics"
          headers:
            Authorization: "Bearer {{$processEnvironment.AUTH_TOKEN}}"
          payload:
            topic_name: "topic-X"
            partitions_count: 64
            replication_factor: 3
            configs:
              - name: "cleanup.policy"
                value: "compact"
              - name: "compression.type"
                value: "gzip"
            validate_only: true
          expect:
            - statusCode: 200
            - hasProperty: "topic_name"
            - hasProperty: "partitions_count"
            - hasProperty: "replication_factor"
            - hasProperty: "configs"
            - hasProperty: "validate_only"
      - think: 1000
      - post:
          url: "/kafka/v3/clusters/{cluster_id}/topics"
          headers:
            Authorization: "Bearer {{$processEnvironment.AUTH_TOKEN}}"
          payload:
            topic_name: "topic-X"
            partitions_count: 64
            replication_factor: 3
            configs:
              - name: "cleanup.policy"
                value: "compact"
              - name: "compression.type"
                value: "gzip"
            validate_only: false
          expect:
            - statusCode: 201
            - hasProperty: "topic_name"
            - hasProperty: "partitions_count"
            - hasProperty: "replication_factor"
            - hasProperty: "configs"
            - hasProperty: "validate_only"
